<!DOCTYPE html>
<!--Gallery Page-->
<html lang="en" dir="ltr">

<head>
  <meta charset="utf-8">
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.2.1/css/bootstrap.min.css">
  <link rel="stylesheet" href="https://www.w3schools.com/w3css/4/w3.css">
  <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Raleway">
  <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.6.3/css/all.css" integrity="sha384-UHRtZLI+pbxtHCWp1t77Bi1L4ZtiqrqD80Kn4Z8NTSRyMA2Fd33n5dQ8lWUE00s/" crossorigin="anonymous">
  <link rel="stylesheet" href="css/styling.css">

  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.6/umd/popper.min.js"></script>
  <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.2.1/js/bootstrap.min.js"></script>
  <title></title>
</head>


<body class="w3-light-grey w3-padding-16">
  <!-- light grey bg for large screens -->
  <!-- w3-content defines a container for fixed size centered content,
  and is wrapped around the whole page content-->
  <div class="w3-content w3-white " style="max-width:800px; height:500px; max-height:800px">


        <!-- Header -- <div data-includeHTML="header.html"></div>-->
        <header class="w3-panel w3-center w3-padding-16">
          <div class="w3-padding-small">
            <div class="w3-bar w3-border">
              <img src="back.png" onclick="goBack()" class="navicon w3-bar-item w3-button "></a>
              <a href="/homepage"> <img src="home.svg" class="navicon w3-bar-item w3-button "></img></a>
              <img src="instruction.png" onclick="document.getElementById('faq').style.display='block'" class="navicon w3-bar-item w3-button"></img>

              <div id="faq" class="w3-modal">
                <div class="w3-modal-content">
                  <div class="w3-container">
                    <span onclick="document.getElementById('faq').style.display='none'" class="w3-button w3-display-topright">&times;</span>
                    <!-- GUIDE content-->
                    <H2 class="w3-center">User Guide</H2>

                    <div class=" w3-content w3-panel">
                      <div class="w3-col">
                        <a href="#new" class="btn btn-info w3-card w3-panel w3-hover-pink w3-padding-16 w3-button w3-block w3-left-align" data-toggle="collapse"> How do I <b>make a new entry? <i class="fa fa-caret-down"></i></b></a>
                        <div id="new" class=" w3-panel w3-card collapse">
                          <p>
                            1. Click on "New Entry" on the home page <br>
                            2. Select the feeling you would like to tag your entry <br>
                            3. Select the topic tag that you are thinking <br>
                            4. The timer will start once you enter text in the text box <br>
                            5. You can pause the timer with the 'play' and 'pause' button <br>
                            ~ Your entry can be saved manually at any time
                            <!--, and a alert will notify you if you are navigating away without saving.-->
                            <br>
                            ~ Navigating away from the entry page while the timer pager will pause the timer.<br>
                          </p>
                        </div>

                        <a href="#view" class="btn btn-info w3-hover-pink w3-panel w3-card w3-padding-16 w3-button w3-block w3-left-align" data-toggle="collapse"> How do I <b>find</b> my past entries? <i class="fa fa-caret-down"></i></a>
                        <div id="view" class="collapse w3-card w3-panel">
                          <p>
                            1. Scroll to see a list of all the tags you have picked <br>
                            2. Click on "Tags" on the home page <br>
                            3. Click on first tag at the top to see all entries associated with that tag <br>
                            4. Click on back button or home screen button <br>

                          </p>
                        </div>

                        <a href="#date" class="btn btn-info w3-panel w3-hover-pink w3-padding-16 w3-card w3-button w3-block w3-left-align" data-toggle="collapse"> How do I view my past entries sorted by <b>date</b>? <i class="fa fa-caret-down"></i></a>
                        <div id="date" class="collapse w3-card w3-panel">
                          <p>
                            1. Click on "Entries" on the home page <br>
                            2. Scroll to see a list of all of your past entries sorted by date and with tags on the top left of each entry box <br>
                            3. Click on your most recent entry (at the top) to see the entry content <br>
                            4. Click on back button or home screen button <br>
                          </p>
                        </div>

                        <H4></H4>
                        <a href="#userview" class="btn btn-info w3-panel w3-hover-pink w3-padding-16 w3-card w3-button w3-block w3-left-align" data-toggle="collapse"> How do I find my <b>profile</b>? <i class="fa fa-caret-down"></i></a>
                        <div id="userview" class="collapse w3-card w3-panel">
                          <p>
                            1. Click on “Profile” button <br>
                            2. View username and total entries <br>
                            3. Click on back button or home screen button <br>

                          </p>
                        </div>

                      </div>
                    </div><!-- GUIDE CONTENT end-->

                  </div>
                </div>
              </div>
            </div>
          </div>

        </header><!--HEADER end-->

        <div id="entryContent"></div>
    <!-- CONTENT-->
    <!-- <div class="w3-card-4 w3-margin-100 w3-white">

      <div class="w3-cell-row">
        <div class=" w3-cell-middle">
          <p class="title" id="lsdate"></p>
          <p id="content"></p>

        </div>
      </div>

      <div class="w3-row w3-card-4 w3-padding-small w3-white">
        <div class="col-xs-10">
          <span id="tag1" class="w3-tag"></span>
          <span id="tag2" class="w3-tag"></span>

        </div>
      </div>



    </div>
    <! END CONTENT -->

    <div class="w3-row w3-card-4 w3-padding-small w3-white">
      <div class="col-xs-10 w3-center">

        <a href="/pastentries"><button type="button mx-auto" class="btn btn-default" id="deleteBtn">Delete All New Entries</button></a>
      </div>
    </div>

  </div><!-- END CONTAINER -->


</body><!-- END BODY -->

<script>
  $(document).ready(function() {
    $("div[data-includeHTML]").each(function() {
      $(this).load($(this).attr("data-includeHTML"));
    });
  });
</script>

<script>
  function goBack() {
    window.history.back();
  }

  var localEntry = JSON.parse(localStorage.getItem("entry"));
  // var lastItem = localEntry && localEntry.length > 0 ? localEntry[localEntry.length - 1] : null;
  // if (lastItem) {
  //   $("#lsdate").text(lastItem.date);
  //   $("#content").text(lastItem.content);
  //   $("#tag1").text(lastItem.tag1);
  //   $("#tag2").text(lastItem.tag2);
  //   console.log(content);
  // }

  function getParameterByName(name, url) {
  if (!url) url = window.location.href;
  name = name.replace(/[\[\]]/g, '\\$&');
  var regex = new RegExp('[?&]' + name + '(=([^&#]*)|&|#|$)'),
    results = regex.exec(url);
  if (!results) return null;
  if (!results[2]) return '';
  return decodeURIComponent(results[2].replace(/\+/g, ' '));
  }

  var entrynumber = getParameterByName('key');
  console.log(entrynumber);

    var div1 = document.createElement("div");
    div1.setAttribute("class","w3-card w3-white w3-margin");

    var div2 = document.createElement("div");
    div2.setAttribute("class","w3-cell-row");

    var div3 = document.createElement("div");
    div3.setAttribute("class","col-xs-10");

    var span1 = document.createElement("span");
    span1.setAttribute("class", "w3-tag");
    var span2 = document.createElement("span");
    span2.setAttribute("class", "w3-tag");
    var span1text = document.createTextNode(localEntry[entrynumber].tag1);
    var span2text = document.createTextNode(localEntry[entrynumber].tag2);

    var div5 = document.createElement("div");
    div5.setAttribute("class","w3-cell-middle");

    var div6 = document.createElement("div");
    div6.setAttribute("class","w3-cell-middle w3-center");

    var h2 = document.createElement("h2");
    var content = document.createTextNode(localEntry[entrynumber].content);
    h2.appendChild(content);

    var h3 = document.createElement("h4");
    var datetext = document.createTextNode(localEntry[entrynumber].date);
    h3.appendChild(datetext);
    h3.setAttribute("class", "w3-block w3-right-align");

    div1.appendChild(div2);
    div2.appendChild(div3);
    div3.appendChild(span1);
    div3.appendChild(span2);
    div3.appendChild(h3);
    div2.appendChild(div5);
    div5.appendChild(div6);
    div6.appendChild(h2);
    span1.appendChild(span1text);
    span2.appendChild(span2text);

    var entryContent = document.getElementById("entryContent");
    entryContent.appendChild(div1);


    deleteBtn.onclick = function() {
      entryArray = JSON.parse(localStorage.entry);
      console.log(entryArray);
      entryArray = entryArray ? entryArray : [];
      entryArray.splice(entrynumber, 1);
      console.log(entryArray);
      localStorage.setItem('entry', JSON.stringify(entryArray));
    }

</script>

</html>
